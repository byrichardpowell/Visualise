<!doctype html>

<!--[if IEMobile 7]><html class="no-js iem7 oldie" ><![endif]-->
<!--[if lt IE 7]><html class="no-js ie6 oldie" lang="en"><![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js ie7 oldie" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js ie8 oldie" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>
<meta charset="utf-8">

<title>Visualise</title>



<!-- For all browsers -->
<link rel="stylesheet" href="css/style.css">


</head>

<body class="clearfix" style="background:black">



	<div id="sound-con">
		<!-- SOund controlls are aded here -->
	</div>



	<canvas id="myCanvas" resize="true" ></canvas>
	
	<!--reqest animation frame polyfil -->
	<script src="js/libs/requestAnimationFrame.js"></script>

	<!-- Safe console log -->
	<script src="js/base.js"></script>

	<!-- Music -->
	<script src="js/soundparser.js"></script>

	<!-- jQuery -->
	<script src="js/libs/jquery.js"></script>

	<!-- Paper -->
	<script src="js/libs/paper.js"></script>
	<script src="js/paper.js" type="text/paperscript" canvas="myCanvas"></script>



	<script type="text/javascript">
		var MySound;
		(function () {
			MySound = new SoundParser('music.ogg', 'sound-con');
		})();
		window.addEventListener('load', function () {
			
			console.log('ready');
			MySound.init();
			
			// Display Lapsed time to make sure audio is referenced properly
			/*
			var currentTimeNode = document.querySelector('#current-time');
			MySound.audio.addEventListener('timeupdate', function(e) {
			  var currTime = this.currentTime;
			  currentTimeNode.textContent = parseInt(currTime / 60) + ':' + parseInt(currTime % 60);
			}, false);
			*/
			
			/*
			var canvas = document.querySelector('#visual');

			var cx = canvas.getContext('2d');
			canvas.width = 1024;
			canvas.height = 240;
			setInterval(function () {
				cx.clearRect(0, 0, canvas.width, canvas.height);
				var d = MySound.getRawData();
				cx.beginPath();
				for (var i = 0; i < 1024; i++) {
					cx.moveTo(i, 0);
					cx.lineTo(i, d[i]);
					cx.stroke();
				}
			}, 10);
			
			setTimeout(function () {
				MySound.getRawData();
			}, 500);
			*/
			
		}, false);
	</script>


</body>
</html>